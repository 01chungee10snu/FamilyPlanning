<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel 4: í•œêµ­ì˜ ì¸êµ¬ì „í™˜ê³¼ ê²½ì œì  í•¨ì˜</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .title {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .pyramid-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            color: #333;
        }
        .pyramid-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        .pyramid-container {
            text-align: center;
        }
        .pyramid-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .analysis-section {
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 15px;
        }
        .stats-timeline {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }
        .timeline-item {
            display: flex;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border-left: 5px solid #ffd700;
        }
        .timeline-year {
            font-size: 1.5em;
            font-weight: bold;
            color: #ffd700;
            min-width: 80px;
        }
        .timeline-content {
            margin-left: 20px;
        }
        .demographic-dividend {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #ffd700;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }
        .ratio-display {
            text-align: center;
            margin: 20px 0;
        }
        .ratio-box {
            display: inline-block;
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            margin: 10px;
            border-radius: 10px;
            min-width: 150px;
        }
        .ratio-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
        }
        .ratio-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        .key-insight {
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid #4caf50;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
        }
        .warning-box {
            background: rgba(255, 152, 0, 0.2);
            border: 2px solid #ff9800;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: #333;
        }
        .comparison-table {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }
        th {
            background-color: #667eea;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .highlight-row {
            background-color: #fff3cd !important;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Panel 4: í•œêµ­ì˜ ì¸êµ¬ì „í™˜ê³¼ ê²½ì œì  í•¨ì˜</h1>
            <p style="opacity: 0.8;">Fertility Decline, Population Age Structure, and Economic Implications</p>
        </div>

        <div class="pyramid-section">
            <h2 style="text-align: center; margin-top: 0;">Figure 1: í•œêµ­ì˜ ì¸êµ¬í”¼ë¼ë¯¸ë“œ ë³€í™” (1960, 2000, 2040)</h2>
            <div class="pyramid-grid">
                <div class="pyramid-container">
                    <div class="pyramid-title">1960ë…„: ë†’ì€ ì¶œì‚°ìœ¨ ì‹œëŒ€</div>
                    <div id="pyramid1960" style="height: 300px;"></div>
                    <p style="font-size: 0.9em; margin-top: 10px;">
                        15ì„¸ ë¯¸ë§Œ: 42%<br>
                        65ì„¸ ì´ìƒ: 3%<br>
                        ë¶€ì–‘ë¹„: 120
                    </p>
                </div>
                <div class="pyramid-container">
                    <div class="pyramid-title">2000ë…„: ì¸êµ¬ ë°°ë‹¹ê¸°</div>
                    <div id="pyramid2000" style="height: 300px;"></div>
                    <p style="font-size: 0.9em; margin-top: 10px;">
                        ìƒì‚°ê°€ëŠ¥ì¸êµ¬ ìµœëŒ€<br>
                        ë¶€ì–‘ë¹„: 250<br>
                        <strong>í™©ê¸ˆê¸°</strong>
                    </p>
                </div>
                <div class="pyramid-container">
                    <div class="pyramid-title">2040ë…„: ê³ ë ¹í™” ì‚¬íšŒ</div>
                    <div id="pyramid2040" style="height: 300px;"></div>
                    <p style="font-size: 0.9em; margin-top: 10px;">
                        65ì„¸ ì´ìƒ: 30%<br>
                        ë¶€ì–‘ë¹„: 137<br>
                        <strong>ê³ ë ¹í™” ë¶€ë‹´</strong>
                    </p>
                </div>
            </div>
        </div>

        <div class="stats-timeline">
            <h2 style="color: #ffd700; text-align: center; margin-top: 0;">í•œêµ­ ì¸êµ¬ì „í™˜ íƒ€ì„ë¼ì¸</h2>

            <div class="timeline-item">
                <div class="timeline-year">1960</div>
                <div class="timeline-content">
                    <strong>ë†’ì€ ì¶œì‚°ìœ¨ ì‹œëŒ€</strong><br>
                    42%ê°€ 15ì„¸ ë¯¸ë§Œ, 3%ê°€ 65ì„¸ ì´ìƒ<br>
                    ê²½ì œí™œë™ì¸êµ¬ 100ëª…ë‹¹ ë¶€ì–‘ ì¸êµ¬ 120ëª… (ë¶ˆë¦¬í•œ êµ¬ì¡°)
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-year">1965</div>
                <div class="timeline-content">
                    <strong>ì¶œì‚°ìœ¨ ê¸‰ê²©í•œ ê°ì†Œ ì‹œì‘</strong><br>
                    ê°€ì¡±ê³„íš í”„ë¡œê·¸ë¨ ë³¸ê²© ì‹œí–‰
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-year">2000</div>
                <div class="timeline-content">
                    <strong>ì¸êµ¬ ë°°ë‹¹ì˜ ì ˆì •</strong><br>
                    ê²½ì œí™œë™ì¸êµ¬ 100ëª…ë‹¹ ë¶€ì–‘ ì¸êµ¬ 250ëª…<br>
                    ì£¼ë¡œ ì•„ë™ ì¸êµ¬ ê°ì†Œ íš¨ê³¼
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-year">2040</div>
                <div class="timeline-content">
                    <strong>ê³ ë ¹í™” ì‚¬íšŒ ë„ë˜</strong><br>
                    ì „ì²´ ì¸êµ¬ì˜ 30%ê°€ 65ì„¸ ì´ìƒ<br>
                    ë¶€ì–‘ë¹„ 137ë¡œ ë‹¤ì‹œ ìƒìŠ¹
                </div>
            </div>
        </div>

        <div class="demographic-dividend">
            <h2 style="color: #ffd700; text-align: center; margin-top: 0;">ì¸êµ¬ ë°°ë‹¹ (Demographic Dividend) íš¨ê³¼</h2>

            <div class="ratio-display">
                <div class="ratio-box">
                    <div class="ratio-number">120</div>
                    <div class="ratio-label">1960ë…„<br>ë¶€ì–‘ë¹„</div>
                </div>
                <div style="display: inline-block; font-size: 2em; margin: 0 20px;">â†’</div>
                <div class="ratio-box">
                    <div class="ratio-number">250</div>
                    <div class="ratio-label">2000ë…„<br>ë¶€ì–‘ë¹„</div>
                </div>
                <div style="display: inline-block; font-size: 2em; margin: 0 20px;">â†’</div>
                <div class="ratio-box">
                    <div class="ratio-number">137</div>
                    <div class="ratio-label">2040ë…„<br>ë¶€ì–‘ë¹„</div>
                </div>
            </div>

            <div class="key-insight">
                <strong>í•µì‹¬ í†µì°°:</strong> ë†’ì€ ë¶€ì–‘ë¹„ ì‹œëŒ€(í”¼ë¼ë¯¸ë“œ B)ëŠ” êµ­ê°€ì—ê²Œ ìƒí™œìˆ˜ì¤€ì„ ë¹ ë¥´ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ”
                ë…íŠ¹í•˜ì§€ë§Œ ì¼ì‹œì ì¸ ê¸°íšŒë¥¼ ì œê³µí•œë‹¤. ì†Œë“ì´ ì Šì€ì´ì™€ ë…¸ì¸ ë¶€ì–‘ì´ ì•„ë‹Œ ìƒì‚°ì  íˆ¬ìì— ì‚¬ìš©ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
            </div>
        </div>

        <div class="analysis-grid">
            <div class="analysis-section">
                <h3 style="color: #ffd700; margin-top: 0;">ê²½ì œì  í•¨ì˜</h3>
                <ul style="list-style: none; padding: 0;">
                    <li>âœ… <strong>ë™ì•„ì‹œì•„ ê²½ì œì„±ì¥ì˜ 1/3</strong>ì´ ì¸êµ¬ ë°°ë‹¹ íš¨ê³¼</li>
                    <li>âœ… 1980-1990ë…„ëŒ€ ì—°í‰ê·  6% ì´ìƒ ì„±ì¥</li>
                    <li>âœ… ìƒì‚°ì  íˆ¬ì ì—¬ë ¥ ì¦ëŒ€</li>
                    <li>âš ï¸ ë…¸ë™ ìˆ˜ìš”, ê±´ì „í•œ ê±°ë²„ë„ŒìŠ¤, ì €ì¶•Â·íˆ¬ì ì œë„ê°€ ì „ì œì¡°ê±´</li>
                </ul>

                <div class="warning-box">
                    <strong>ì£¼ì˜ì‚¬í•­:</strong> ë¼í‹´ì•„ë©”ë¦¬ì¹´ëŠ” ë™ì•„ì‹œì•„ì™€ ìœ ì‚¬í•œ ì¸êµ¬êµ¬ì¡° ë³€í™”ë¥¼ ê²ªì—ˆì§€ë§Œ
                    1980-1999ë…„ 1ì¸ë‹¹ GDP ì—°ê°„ ì¦ê°€ìœ¨ì´ 2%ì— ë¶ˆê³¼í–ˆë‹¤.
                </div>
            </div>

            <div class="analysis-section">
                <h3 style="color: #ffd700; margin-top: 0;">ì •ì±…ì  ì‹œì‚¬ì </h3>
                <ul style="list-style: none; padding: 0;">
                    <li>ğŸ¯ <strong>ì¸êµ¬ ë°°ë‹¹ì€ ìë™ìœ¼ë¡œ ì˜¤ì§€ ì•ŠìŒ</strong></li>
                    <li>ğŸ›ï¸ ì¢‹ì€ ê±°ë²„ë„ŒìŠ¤ì™€ ì ì ˆí•œ ì œë„ í•„ìš”</li>
                    <li>ğŸ’¼ ë…¸ë™ ìˆ˜ìš” ì°½ì¶œì´ í•µì‹¬</li>
                    <li>ğŸ’° ì €ì¶•ê³¼ íˆ¬ìë¥¼ ìœ„í•œ ê¸ˆìœµ ì¸í”„ë¼</li>
                    <li>ğŸ“š ì¸ì ìë³¸ ê°œë°œ ë™ë°˜ í•„ìš”</li>
                </ul>

                <div class="key-insight">
                    ë¼í‹´ì•„ë©”ë¦¬ì¹´ì˜ ê²½ì œ ì„±ê³¼ëŠ” ì¸êµ¬ ë°°ë‹¹ì´ ì—†ì—ˆë‹¤ë©´ ë”ìš± ì €ì¡°í–ˆì„ ê²ƒì´ë‹¤.
                </div>
            </div>
        </div>

        <div class="comparison-table">
            <h3 style="text-align: center; margin-top: 0;">ë™ì•„ì‹œì•„ vs ë¼í‹´ì•„ë©”ë¦¬ì¹´ ë¹„êµ (1980-1999)</h3>
            <table>
                <thead>
                    <tr>
                        <th>ì§€ì—­</th>
                        <th>ì¸êµ¬êµ¬ì¡° ë³€í™”</th>
                        <th>ì—°í‰ê·  GDP ì„±ì¥ë¥ </th>
                        <th>ì„±ê³µ ìš”ì¸</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="highlight-row">
                        <td><strong>ë™ì•„ì‹œì•„</strong></td>
                        <td>ì¸êµ¬ ë°°ë‹¹ ì ê·¹ í™œìš©</td>
                        <td><strong>6% ì´ìƒ</strong></td>
                        <td>ì¢‹ì€ ê±°ë²„ë„ŒìŠ¤, íˆ¬ì í™•ëŒ€, ìˆ˜ì¶œ ì£¼ë„</td>
                    </tr>
                    <tr>
                        <td><strong>ë¼í‹´ì•„ë©”ë¦¬ì¹´</strong></td>
                        <td>ìœ ì‚¬í•œ ì¸êµ¬êµ¬ì¡° ë³€í™”</td>
                        <td><strong>2%</strong></td>
                        <td>ì œë„ì  í•œê³„, íˆ¬ì ë¶€ì¡±</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="chart-container">
            <h3 style="text-align: center; margin-top: 0;">í•œêµ­ì˜ ì¸êµ¬ ë°°ë‹¹ ì£¼ê¸°</h3>
            <div id="dividendChart" style="height: 400px;"></div>
        </div>
    </div>

    <script>
        // Age pyramids for Korea
        const ages = Array.from({length: 17}, (_, i) => `${i*5}-${i*5+4}`);
        const ages_labels = ['0-4', '5-9', '10-14', '15-19', '20-24', '25-29', '30-34', '35-39', '40-44', '45-49', '50-54', '55-59', '60-64', '65-69', '70-74', '75-79', '80+'];

        // 1960 data (high fertility)
        const males1960 = [-3000, -2800, -2500, -2200, -1900, -1600, -1400, -1200, -1000, -800, -600, -500, -400, -300, -200, -100, -50];
        const females1960 = [2900, 2700, 2400, 2100, 1800, 1500, 1300, 1100, 950, 750, 550, 450, 350, 280, 190, 120, 70];

        // 2000 data (demographic dividend)
        const males2000 = [-2000, -2000, -2100, -2200, -2000, -1800, -1600, -1500, -1400, -1300, -1000, -800, -600, -400, -300, -200, -100];
        const females2000 = [1900, 1900, 2000, 2100, 1900, 1700, 1500, 1400, 1300, 1200, 950, 750, 550, 380, 280, 190, 130];

        // 2040 data (aging society)
        const males2040 = [-1000, -1000, -1100, -1200, -1300, -1400, -1500, -1600, -1700, -1800, -2000, -2200, -2100, -1900, -1600, -1200, -800];
        const females2040 = [950, 950, 1050, 1150, 1250, 1350, 1450, 1550, 1650, 1750, 1950, 2150, 2050, 1850, 1550, 1150, 900];

        // Create pyramid charts
        function createPyramid(elementId, males, females, title) {
            const trace1 = {
                y: ages_labels,
                x: males,
                name: 'ë‚¨ì„±',
                type: 'bar',
                orientation: 'h',
                marker: { color: '#667eea' },
                hovertemplate: '%{y}<br>ë‚¨ì„±: %{x:,}<extra></extra>'
            };

            const trace2 = {
                y: ages_labels,
                x: females,
                name: 'ì—¬ì„±',
                type: 'bar',
                orientation: 'h',
                marker: { color: '#764ba2' },
                hovertemplate: '%{y}<br>ì—¬ì„±: %{x:,}<extra></extra>'
            };

            const layout = {
                title: '',
                barmode: 'overlay',
                xaxis: {
                    title: 'ì¸êµ¬ (ì²œëª…)',
                    showgrid: false
                },
                yaxis: {
                    title: 'ì—°ë ¹',
                    showgrid: false
                },
                font: { family: 'Segoe UI', size: 10 },
                plot_bgcolor: 'rgba(0,0,0,0)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                margin: { l: 50, r: 50, t: 30, b: 50 }
            };

            Plotly.newPlot(elementId, [trace1, trace2], layout, {responsive: true, displayModeBar: false});
        }

        createPyramid('pyramid1960', males1960, females1960);
        createPyramid('pyramid2000', males2000, females2000);
        createPyramid('pyramid2040', males2040, females2040);

        // Demographic dividend chart
        const years = [1960, 1970, 1980, 1990, 2000, 2010, 2020, 2030, 2040];
        const dependencyRatio = [120, 110, 95, 80, 70, 80, 100, 120, 137];
        const workingAge = [55, 58, 62, 68, 72, 70, 65, 60, 55];

        const trace1 = {
            x: years,
            y: dependencyRatio,
            mode: 'lines+markers',
            name: 'ë¶€ì–‘ë¹„ (ë‚®ì„ìˆ˜ë¡ ìœ ë¦¬)',
            line: { color: '#ff6b6b', width: 3 },
            marker: { size: 8 },
            yaxis: 'y'
        };

        const trace2 = {
            x: years,
            y: workingAge,
            mode: 'lines+markers',
            name: 'ìƒì‚°ê°€ëŠ¥ì¸êµ¬ ë¹„ìœ¨ (%)',
            line: { color: '#4caf50', width: 3 },
            marker: { size: 8 },
            yaxis: 'y2'
        };

        const layout = {
            title: '',
            xaxis: { title: 'ì—°ë„' },
            yaxis: {
                title: 'ë¶€ì–‘ë¹„',
                side: 'left'
            },
            yaxis2: {
                title: 'ìƒì‚°ê°€ëŠ¥ì¸êµ¬ ë¹„ìœ¨ (%)',
                side: 'right',
                overlaying: 'y'
            },
            font: { family: 'Segoe UI' },
            plot_bgcolor: 'rgba(0,0,0,0)',
            paper_bgcolor: 'rgba(0,0,0,0)',
            annotations: [
                {
                    x: 2000,
                    y: 70,
                    text: 'ì¸êµ¬ ë°°ë‹¹ ì ˆì •ê¸°<br>(1990-2010)',
                    showarrow: true,
                    arrowhead: 2,
                    arrowcolor: '#ffd700',
                    font: { color: '#ffd700', size: 12 }
                }
            ]
        };

        Plotly.newPlot('dividendChart', [trace1, trace2], layout, {responsive: true});
    </script>
</body>
</html>